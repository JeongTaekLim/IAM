# 하둡 생태계 기초

![hadoop-ecosystem](https://www.bogotobogo.com/Hadoop/images/Ecosystem/Hadoop_Ecosystem3.png)

## 하둡 분산형 파일 시스템 - HDFS(Hadoop Distributed FileSystem)

출처 - https://opentutorials.org/course/2908/17055
### 아키텍쳐
1. 블록구조의 파일 시스템으로, 저장하는 파일은 특정 사이즈의 블록으로 나눠져 분산된 서버에 저장됨.
2. 하나의 블록은 3개(수정가능)로 복제되며, 각각 다른 HDFS의 노드에 분산저장됨
3. HDFS에는 마스터 역할을 하는 네임노드 서버 한대와, 슬레이브 역할을 하는 데이터노드 서버가 여러 대로 구성됨.
4. 네임 노드는 HDFS의 모든 메타데이터(블록들이 저장되는 디렉토리의 이름, 파일명 등...)를 관리하고, 클라이언트가 이를 이용하여 HDFS에 저장된 파일에 접근할 수 있음.
5. 하둡 어플리케이션은 HDFS에 파일을 저장하거나, 저장된 파일을 읽기 위해 HDFS 클라이언트를 사용하며, 클라이언트는 API 형태로 사용자에게 제공됨.
6. 데이터 노드는 주기적으로 네임노드에서 블록 리포트(노드에 저장되어있는 블록의 정보)를 전송하고 이를 통해 네임노드는 데이터 노드가 정상 동작하는지 확인.
7. 클라이언트는 네임노드에 접속해서 원하는 파일이 저당된 블록의 위치를 확인하고, 해당 블록이 저장된 데이터노드에서 직접 데이터를 조회함.

### 파일 저장 플로우
![하툽 파일 저장 플로우](https://s3-ap-northeast-2.amazonaws.com/opentutorials-user-file/module/2926/6497.png)
1. 어플리케이션이 HDFS 클라이언트에게 파일 저장을 요청하며, HDFS 클라이언트는 네임노드에게 파일 블록들이 저장될 경로 생성을 요청. 네임노드는 해당 파일 경로가 존재하지 않으면 경로를 생성한 후, 다른 클라이언트가 해당 경로를 수정하지 못하도록 락.
그후, 네임노드는 클라이언트에게 해당 파일 블록들을 저장할 데이터노드의 목록을 반환
2. 클라이언트는 첫 번째 데이터 노드에게 데이터를 전송
3. 첫 번째 데이터 노드는 데이터를 로컬에 저장한 후, 데이터를 두 번째 데이터 노드로 전송
4. 두 번째 데이터 노드는 데이터를 로컬에 저장한 후, 데이터를 세 번째 데이터 노드로 전송.
5. 로컬에 데이터를 저장하였으면, 자기에게 데이터를 넘겨준 데이터 노드에게, 데이터의 로컬 저장이 완료되었음을 응답.
6. 5번과 동일
7. 첫 번째 데이터 노드는 클라이언트에게 파일 저장이 완료되었음을 응답.

## 아파치 플럼(Flume)

